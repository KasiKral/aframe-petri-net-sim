<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport"
          content="width=device-width">
    <meta name="apple-mobile-web-app-capable"
          content="yes">
    <link rel="stylesheet"
          href="./css/main.css">
    <title>VR for educational purposes</title>
    <meta name="description"
          content="Now in 3D!">

    <script src="https://aframe.io/releases/1.0.4/aframe.min.js"
            crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/gh/donmccurdy/aframe-extras@v6.1.1/dist/aframe-extras.min.js"
            crossorigin="anonymous"></script>

    <!--PHYSICS SYSTEM------------------------------------------------------------------------------------------------------>
    <script src="https://cdn.jsdelivr.net/gh/n5ro/aframe-physics-system@v4.0.1/dist/aframe-physics-system.min.js"
            crossorigin="anonymous">
    </script>
    <script src="https://unpkg.com/aframe-physics-extras/dist/aframe-physics-extras.min.js"
            crossorigin="anonymous"></script>

    <!--MY SCRIPTS------------------------------------------------------------------------------------------------------>
    <script src="js/components/clickHandler.component.js"></script>
    <script src="js/components/petriNetSim.component.js"></script>
    <script src="js/components/map.component.js"></script>

</head>

<body>

    <a-scene shadow="type: pcfsoft"
             fog="type: linear; color: #000; far: 16; near: 7"
             petri-net-sim="event: anEvent; message: Intit State">

        <!-- Splash Screen -->
        <div class="splash">
            <div class="splash__card">
                <h1>Education experience in VR</h1>
                <p>You can move around with WASD keys (desktop)</p>
                <img class="splash__img"
                     src="img/splash/whoa.jpg"
                     alt="whoa" />
                <button class="splash__button">Enter</button>
            </div>
        </div>

        <!-- Load Assets -->
        <a-assets>
            <!-- global -->
            <img id="floor"
                 src="img/map/floor.jpg"
                 alt="floor"
                 crossorigin="anonymous">
            <img id="wall"
                 src="img/map/wall-concrete.jpg"
                 alt="wall"
                 crossorigin="anonymous">
            <img id="wall-secret"
                 src="img/map/wall-concrete-secret.jpg"
                 alt="wall-secret"
                 crossorigin="anonymous">
            <img id="wall-brick"
                 src="img/map/brick.jpg"
                 alt="wall-brick"
                 crossorigin="anonymous">
            <img id="skybox"
                 src="img/sky/skybox.jpg"
                 alt="skybox"
                 crossorigin="anonymous" />
        </a-assets>


        <!-- Ground -->
        <a-grid id="ground"
                load-map
                static-body
                material="src: #floor; repeat: 15 15"
                position="0 0 -0.5"
                rotation="-90 0 0"
                shadow="cast: false; receive: true"></a-grid>


        <!-- AVATAR BODY ------------->
        <a-entity id="rig"
                  positon="0 0 8">
            <a-entity id="player"
                      position="0 0 8"
                      movement-controls
                      gaze-interaction
                      kinematic-body>
                <a-entity id="playerhead"
                          camera
                          position="0 1.6 0"
                          rotation="0 0 0"
                          look-controls="pointerLockEnabled:true">
                    <!--END OF 3D CURSOR IMPLEMENTATION ------------------------------------------->
                    <a-entity class="rayhead"
                              cursor="rayOrigin: mouse;"
                              raycaster="objects: .clickable; showLine: true; far: 500"
                              line="color: white; opacity: 1"
                              position="0 0 0"
                              visible="false"></a-entity>
                    <a-entity cursor="fuse: false; fuseTimeout: 500"
                              geometry="primitive: ring; radiusInner: 0.005; radiusOuter: 0.009"
                              material="color: #d1d1d1; shader: flat"
                              position="0 0 -1"></a-entity>
                </a-entity>
            </a-entity>
        </a-entity>
        <!-- END OF AVATAR BODY ------------->

        <!-- Walls (used by map.js -->
        <a-entity id="walls"
                  shadow="recive: true"
                  position="0 3 0"></a-entity>


        <!-- Exampe Room 1 (Immediate left) -->
        <!-- Lights LEFT 1 -->
        <a-sphere id="st1_m1"
                  clickhandler="name: st1_m1"
                  color="red"
                  radius=".2"
                  position="-10 2 7.5"></a-sphere>
        <a-sphere id="st1_m2"
                  clickhandler="name: st2_m2"
                  color="green"
                  radius=".2"
                  position="-10 2 8.5"></a-sphere>
        <a-sphere id="st1_m3"
                  clickhandler="name: st3_m3"
                  color="yellow"
                  radius=".2"
                  position="-10 2 6.5"></a-sphere>
        <a-entity id="ST1"
                  geometry="primitive: sphere; radius: 0.2"
                  light="type: point; color: green; intensity: 0.1"
                  material="color: green; shader: flat;"
                  position="-4 5 7.5"></a-entity>
        <!-- Exampe Room 2 (Immediate right) -->
        <!-- Lights RIGHT 2 -->
        <a-entity id="ST2"
                  geometry="primitive: sphere; radius: 0.2"
                  light="type: point; color: red; intensity: 0.1"
                  material="color: red; shader: flat;"
                  position="2 5 7.5"></a-entity>

        <!-- Exampe Room 3 (Second right) -->
        <!-- Lights RIGHT 3 -->
        <a-entity id="ST3"
                  geometry="primitive: sphere; radius: 0.2"
                  light="type: point; color: red; intensity: 0.1"
                  material="color: red; shader: flat;"
                  position="2 5 -4"></a-entity>

        <!-- Exampe Room 4 (BIG room) -->
        <!-- Lights BIG ROOM 4 -->
        <a-entity id="ST4"
                  geometry="primitive: sphere; radius: 0.2"
                  light="type: point; color: red; intensity: 0.1"
                  material="color: red; shader: flat;"
                  position="-1.2 5 -20.5"></a-entity>


        <!-- Sky -->
        <a-sky src="#skybox"
               rotation="0 90 0"></a-sky>

        <!-- !--LIGHTS implementation
        -------------------------------------------------------------------------------------------->
        <a-entity light="color: #fff; intensity: 0.34; type: ambient;"
                  visible="true">
        </a-entity>
        <a-entity light="type: directional; color: #FFF; intensity: 1; castShadow: true; shadowCameraFar: 500;
                shadowCameraVisible: false;
                shadowBias: -0.001;
                shadowMapHeight:2048; shadowMapWidth:2048;
                shadowCameraLeft: -50; shadowCameraRight: 50;
                shadowCameraBottom: -50; shadowCameraTop: 50;"
                  position="12 21 -3"
                  target="#directionaltarget">
            <a-entity id="directionaltarget"
                      position="0 0 0"></a-entity>
        </a-entity>

    </a-scene>

    <script src="js/splash.js"></script>
</body>

</html>